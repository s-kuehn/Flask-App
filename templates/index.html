{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}

<div class="container">
	
	<div class="row">
		<div class="col">
			<div class='card bg-light'>

				<div class='card-header text-center'>
					<h5>COST ANALYSIS CALCULATOR</h5>
				</div>

				<div class="card-body">

					<form action='/' method="post">

						<div class="form-group">
							<label for="Number One">Name:</label>
							<input class="form-control" type="text" ondrop="return false;"placeholder="Product Name" name="product" autocomplete="off" required>
						</div>

						<div class="form-group">
							<label for="Number One">Cost:</label>
							<div class="input-icon">
								<input class="form-control" type="text" ondrop="return false;" onkeypress="return event.charCode>=46 && event.charCode<=57" placeholder="Cost" name="cost" autocomplete="off" required>
								<i>$</i>
							</div>
						</div>

						<div class="form-group">
							<label for="Number Two">Revenue:</label>
							<div class="input-icon">
								<input class="form-control" type="text" ondrop="return false;" onkeypress="return event.charCode>=46 && event.charCode<=57" placeholder="Revenue" name="revenue" autocomplete="off" required>
								<i>$</i>
							</div>
						</div>

						<div class="form-group">
							<input class='btn btn-success' type="submit" value="Calculate" name="submit">
						</div>

					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col">
			<div class='card bg-light'>

				<div class='card-header'>
					<a class='btn btn-success' id="downloadBtn" href="/data" download="margins.csv">Download As CSV</a>
					<a class='btn btn-success' id="clearTable" href="/clear">CLEAR TABLE</a>
					<h5 id="results">RESULTS</h5>
				</div>

				<div class="card-body">

					<div class="table-responsive-lg">
						<table class="table">
							<thead>
								<tr>
									<th scope="col">Name</th>
									<th scope="col">Cost</th>
									<th scope="col">Revenue</th>
									<th scope="col">Profit</th>
									<th scope="col">Margin</th>
								</tr>
							</thead>

							<tbody>
								{% for item in items %}
								<tr>
									<!-- <td>{{ item[0] }}</td> -->
									<td>{{ item[1] }}</td>
									<td>${{ item[2] }}</td>
									<td>${{ item[3] }}</td>
									<td>${{ item[4] }}</td>
									<td>{{ item[5] }}%
										<a href="/delete?id={{ item[0] }}" class="btn btn-danger rightAligned" value="Delete">DELETE</a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>

				</div>
			</div>

		</div>
	</div>

</div>
{% endblock %}